if exists('$SUDO_USER')
  " swap
  set noswapfile

  " backup
  set nobackup
  set nowritebackup

  " undo
  set noundofile

else
  set backupdir=~/local/.vim/tmp/backup//
  set backupdir+=~/.vim/tmp/backup//    " keep backup files out of the way
  set backupdir+=.

  set directory=~/local/.vim/tmp/swap//
  set directory+=~/.vim/tmp/swap//     " keep swap files out of the way
  set directory+=.

  if has('persistent_undo')
    set undodir=~/local/.vim/tmp/undo//
    set undodir+=~/.vim/tmp/undo//      " keep undo files out of the way
    set undodir+=.
    set undofile
  endif
endif

imap jk <Esc>

let mapleader="\<Space>"
let maplocalleader="\\"

filetype indent plugin on
syntax on

" Load local overrides ~/.vim/vimrc.local
let s:vimrc_local = $HOME . '/.vim/vimrc.local'
if filereadable(s:vimrc_local)
  execute 'source ' . s:vimrc_local
endif

" graceful degradation for plugins
if exists('&loadplugins')
  if has('packages')
     packloadall
  else
    source $HOME/.vim/pack/bundle/opt/vim-pathogen/autoload/pathogen.vim
    call pathogen#infect('pack/bundle/start/{}')
  endif
endif
